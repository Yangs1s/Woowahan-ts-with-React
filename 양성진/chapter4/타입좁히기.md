# 타입좁히기 

## 타입 가드

변수 또는 표현식의 타입범위를 더 작은 범위로 좁혀 나가는 과정을 말한다.
좀 더 정확하고 명시적인 타입추론이 가능하고, 복잡한 타입을 작은 범위로 축소하여 타입 안정성을 높일수 있다.

### 타입가드에 따라 분기 처리하기
> **분기 처리**
>
> 조건문과 타입가드를 활용해서 다양한 상황에 따른 다른 동작을 수행하는것을 말함.

> **타입가드** 
>
>런타임에 조건을 사용해서 타입을 검사하고 범위를 좁혀주는 기능.
>typeof,instanceof 같은 것

> **사용자 정의 타입 가드**
>
> 사용자가 직접 어떤 타입으로 값을 좁힐지 직접 지정하는 방식.

### 원시타입을 추론할때: typeof 연산자 활용하기
typeof 연산자를 이용하여 검사할수 있는 타입 목록
>string, number, boolean, undefined, symbol,bigint,object,function
```ts
function processValue(value: string | number) {
  if (typeof value === 'string') {
    console.log(value.toUpperCase());
  } else {
    console.log(value.toFixed(2));
  }
}
```

### 인스턴스화된 객체 타입을 판별할때: instanceof 연산자를 활용하기



instanceof 연산자는 인스턴스화된 객체타입을 판별하는 타입 가드로 사용.


**A instanceof B 형태로 사용**

A는 타입을 검사할 대상 변수.

B는 특정 객체의 생성자가 들어감.

A의 프로토타입 체인에 생성자 B가 존재하는지 검사해서 존재하면 true 아님 false로 반환.


```ts
function handleError(error: Error | string) {
  if (error instanceof Error) {
    console.log(error.message);
  } else {
    console.log(error);
  }
}
```

### 객체의 속성이 있는지 없는지에 따른 구분: in연산자를 활용하기.

A in B의 형태로 사용.

말 그대로 B안에 A가 존재하는지를 검사한다. true or false로 반환한다.

```ts
interface Bird {
  fly(): void;
  layEggs(): void;
}

interface Fish {
  swim(): void;
  layEggs(): void;
}

function move(pet: Bird | Fish) {
  if ('fly' in pet) {
    pet.fly();
  } else {
    pet.swim();
  }
}
```

### is연산자로 사용자 정의 타입가드 만들어서 사용하기.


## 식별할 수 있는 유니온

### 에러 정의하기.
### 식별할 수 있는 유니온
### 식별할 수 있는 유니온의 판별자 선정
## Exhaustiveness Checking으로 정확한 타입분기 유지하기.